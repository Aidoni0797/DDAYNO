DDAYNO8

Важно: в этом уроке основное внимание уделяется лекциям, а практики будет немного. Если что-то покажется непонятным, не стоит беспокоиться - это нормально. Важно просто помнить, что в
Django есть различные методы, и в случаи необходимости можно вернуться к лекции и повторить материал. В следующих уроках будет больше практики, что заставит вас лучше запоминать
пройденные темы.

Модели для начинающих

В этом разделе представлен обзор того, как определяется модель, и некоторые из наиболее важных полей и аргументы поля.
Согласно официальному стилю программирования, Django рекомендует использовать следующий

Существует общепринятый стиль, основанный на рекодендациях в документации и распространенной практике в сообществе. Этот стиль ориентирован на читаемость, поддерживаемость и согласованность
кода.
Вот ключевые аспекты, составляющие "официальный стиль" (или, точнее, рекомендуемый):

1. Порядок при написании моделей:
- Все поля модели
- Кастомные менеджеры
- Мета классы
- Методы класса __str__(), save(), get_absolute_url()
- Другие кастомные методы

2. Имена моеделй:
- Имена моделей должны быть единственным числом, в форме существенного (напрмер. BlogPost, User, Product, Comment)
- Используйте заглавные буквы для каждого слова (CamelCase)

3. Имена полей:
- Имена полей должны быть в нижнем регистре с использованием подчеркивания для разделения слов (snake_case)
(например, first_name, last_name, publication_date)
- Используйте описательные имена, четко ортажающие назначение поля
- Избегайте аббервиатур, если они не являются общепринятыми

4. Типы полей:
- Выбирайте подходящий тип поля для каждого атрибута, учитывая тип данных и ограничения
- Указывайте необходимые параметры (например, max_length для CharField, choices для IntegerField и т.д.).
- Используйте default для задания значения по умолчанию, если оно есть
- Используйте null=True и blank=True осторожно, только если поле действительно может быть пустым в базе данных и это допустимо с точки
зрения бизнес-логики. null=True позволяет хранить NULL в базе данных, а blank = True позволяет оставлять поле пустым в форме.

5. Внутренний класс Meta:
- Если нужны метаданные для модели (например, ordering, verbose_name, verbose_name_plural), используйте внутренний класс Meta.
- Имена атрибутов в Meta должны быть в нижнем регистре.

6. Методы моделей:
- Используйте методы для реализации логики, связанной с моделью (например, валидация, подготовка данных перед сохранением).
- Названия методов должны быть описательными и начинаться с глагола.
- Используйте __str__ для определения строкового представления объекта модели. Это используется  для отображения объекта в админке и других 
местах.

7. Импорт:
- Размещайте импорты в начале файла, группируя их по категориям (стандартные библиотеки Python, сторонние библиотеки Python, компоненты 
Django, пользовательские компоненты Django).
- Используйте абсолютный импорт для компонентов Django, и относительный для пользовательских компонентов Django.

При написнаии моделей мы будем использовать следующую структуру для них:
class ModelName(models.Model):
  #Поля
  field_name = models.CharField(max_length=, help_text=,choices=, Null etc)

  #Класс Meta
  class Meta:
    ordering=['field_name']

  #Методы класса
  def __str__(self):
    return '<readable_name>'

Определение модели 
Модели обычно определяются в приложении в файле models.py
Они реализуются как классы Python, и могут включать поля, методы и метаданные.
Модель Django - это класс Python, который наследуется от djnago.db.models.Model, и который описывает структуру данных,
хранящихся в базе данных вашего веб-приложения. Каждая модель представляет собой таблицу в базе данных, а атрибуты модели соответствуют 
столбцам этой таблицы. Модели определяют поля, типы данных, ограничения и связи с другими моделями.

Поля модели
В модели Django поле определяет атрибут объекта  модели и, соответственно, столбец в соответствубщей таблице базы данных. Другими словами,
опи описывает, один из параметров, характеризующих сущность, которую представляет модель.

Поле имеет следующие основные характеристики:
Тип данных: Определяет тип данных, которые могут храниться в поле. Django предоставляет множество типов полей (например, CharField,
IntegerField, BooleanField, DateTimeFiel, ForeignKey, ManyToManyField и др.), каждый из которых имеет своих особенности и ограничения.
Тип данных определяет формат хранения информации в базе данных.

Имя: Уникальное имя поля внутри модели. Используется для доступа к полю через код Python. Имя поля должно соответствовать соглашениям
о наименовании (обычно snake_case).

Параметры: Многие типы полей принимают дополнительные параметры, которые уточняют их поведение.

Поле в Django  модели предоставляет несколько аспектов:

- Тип столбца (базового типа данных): Это основной аспект. Поле определяет, какого типа данные будут храниться в соответсвующем столбце 
базы данных. Например, CharField хранит строки, IntegerField хранит целые числа, DateTimeField хранит даты и время, ForeignKey устанавливает связь
с другим объектом модели. Выбор правильного типа данных очень важен для эффективности базы данных и корректной работы приложения.

- Веб-компонент (вид ввода): Поле, определенное в Django модели, автоматически пораждает соответствующий веб-компонент (например, текстовое
поле, поле выбора, поле даты и времнеи) при использовании в админ-панели Django или при создании форм. Этот веб-компонент позволяет пользователю
вводить и выбирать значение для соответствующего поля. Django автоматически генерирует HTML для этих компонентов, обеспечивая стандартный
пользовательский интерфейс.

- Требования к валидации: Помимо определения типа столбца, поле может включать различные правила валидации, которые Django применяет при
сохранении объекта. Валидация может быть сделана на уровне модели с помощью методов clean_<имя_поля>() или с помощью параметров полей.
Валидация выполняется Django автоматически при сохранении объекта. Если проверка не пройдена, Django возвратит ошибку. Это обеспечивает 
корректность данных вводимых в приложение.

Django предоставляет широккий спектр типов полей для моделей, каждый из которых предназначен для хранения определенного типа данных.
Вот описание наиболее распространенных типов полей:

Текстовые поля:

- CharField: Хранит строку ограниченной длины. Требует параметра max_length, определяющего максимальное количество символов. Используется
для коротких текстовых строк, таких как имена, названия и т.п.

- TextField: Хранит строку произвольной длины. Используется для длинных текстов, таких как описнаия, статтьи и т.п.

- EmailField: Хранит адрес электронной почты. Проверяет корректность формата адреса.

- URLField: Хранит URL-адрес. Проверяет коррекнтность формата URL.

- SlugField: Хранит slug - URL-адрес без пробелов и специальных символов. Часто используется для создания читабельных URL. Может
автоматически генерироваться из другого поля.

- IPAddressField: Хранит IP-адрес

- GenericIPAddressField: Хранит IPv4 или IPv6 адрес.

Числовые поля:

- IntegerField: Хранит целое число
- BigIntegerField: Хранит большое целое число
- SmallIntegerField: Хранит малое целое число
- PositiveIntegerField: Хранит положительное целое число
- PositiveSmallIntegerField: Хранит положительное малое целоечисло
- FloatField: Хранит число с плавающей точкой
- DecimalField: Хранит число с плавающей точкой с заданной точностью и количеством знаков после запятой. Требует параметров max_digits
(общее количество цифр) и decimal_places (количество цифр после запятой). Используется для финансовых данных и других случаев, где важна
точность.

Поля даты и времени:
- DateField: Хранит дату. При передаче значения аргумента auto_now_add = True дата будет сохраняться автоматически во время создания бъекта.
При передаче значнения аргумента auto_now=True дата будет обновляться автоматически во время сохранения объекта.

- DateTimeField: Хранит дату и время. Также как и для DateField можно использовать параметры auto_now_add и auto_now.

- TimeField: Хранит время. Также как и для DataField можно использовать параметры auto_now_add and auto_now

Булево поле:
- BooleanField: Хранит булево значение (True/False)
- NullBooleanField: Аналогично BooleanField, но позволяет хранить значение NULL.

Поле выбора:
- ChoiceField: Хранит значение из предопределенного списка вариантов. Требует параметра choices, предоставляющего собой список кортежей вида 
(значение, отображаемое имя)

Поля для файлов:
- FileeField: Хранит путь к файлу. Требует параметра upload_to, в котором указывается путь к директории для загрузки файлов относительно
корневой директории проекта, или относительно медиа-директории (если задано значение MEDIA_ROOT в настройках проекта), например
upload_to = 'upload_files'. Если параметр  upload_to не задан, то файлы будут загружаться в корневую директорию проекта или в медиа-
директорию (если задано значение MEDIA_ROOT в настройках проекта). Для ограничения типов загружаемых файлов можно использовать валидатор
FileExtensionValidator, например: validators = [FileExtensionValidator(allowed_extensions=('txt', 'doc', 'pdf'))].

- ImageField: Хранит путь к изображению. Тоже требует параметра upload_to и может использовать валидатор FileExtensionValidator для 
ограничения типов загружаемых изображений. Можно использовать значение по умолчанию, например если изображение по умолчанию
default.jpg хранится в директории "upload_images", указанной в параметре upload_to, то значение default='upload_images/default.jpg'

Поля для связи с другими моделями:
- ForeignKey: Создает связь один-ко-многим с другой моделью. Требует указания модели, с которой создается связь, и параметра on_delete,
определяющего поведение пр удалении связанного объекта (например, CASCADE, PROTECT, SET_NULL, SET_DEFAULT, DO_NOTHING)
- ManyToManyField: Создает связь многие ко многим с другой моделью.
- OneToOneField: Создает связь один-к-одному с другой моделью

Специальные поля:
AutoField: Хранит автоматически генерируемый первичный ключ. Обычно не нужно явно определять.
UUIDField: Хранит уникальный идентификатор UUID.

Общие параметры полей
Многие типы полей в Django моделях поддерживают общие параметры, которые позволяют настроить их поведение и валидацию. Вот описание наиболее
распространенных общих параметров:
- null=True: Разрешает хранение значениия Null в базе данных. Если null=False (значение по умолчанию), то поле обязательно должно иметь 
значение. Важно отличать null от blank.

- blank = True: Разрешает оставлять поле пустым при заполнении формы. Если blank=False (значение по умолчанию), то поле обязательно должно
быть заполнено в форме. Даже если blank=True, значение в базе данных все равно не можетбыть NULL, если null =False.

- default: Устанавливает значение по умолчанию для поля. Значение может быть любым Python-объектом, который может быть сериализован в базу данных.
Если default не указан, значение поля будет NULL (или пустым, в зависимости от типа поля и null) при создании нового объекта. Важно
учитывтаь возможность несоответствия типа default и типа поля.

- editable=True: Определяет, редактируется ли поле в админ-интерфейсе Django. Если editable=False, то поле не будет отображаться в форме
редактирования. Полезно для полей, значения которых вычисляются или устанавливаются программно.

- choices: Ограничивает значения поля предопреленным списком вариантов. Значение должно быть итерируемым объектом 
(например, список кортежей), где каждый кортеж содержит (значение, отображаемое имя). Это полезно для создания выпадющих списков в формах.

- help_text: Добавляет вспомогательный текст к полю, который отображается в админ-инерфейсе и может быть использован в формах. Полезно для
предоставления пользователям дополнительных инструкций или пояснений.

- verbose_name: Задает читаемое имя поля, которое используется в админ-интерфейсе и в других местах. По умолчанию используется имя поля.

- unique=True: Гарантирует, что значение в этом поле уникально для всех объектов модели. Попытка сохранить два объекта с одинаковым значением
в этом поле приведет к ошибке.

- primary_key=True: Обозначает это поле как первичный ключ таблицы в базе данных. Обычно используется только для одного поля в модели.
AutoField по умолчанию является первичным ключом.

- validators: Список валидаторов, которые применяются к значению поля перед сохранением. Валидаторы могут проверять различные аспекты значения,
такие как длина, формат, диапазон и т.д. Вы можете использовать как встроенные валидаторы из Django, так и свои собственные.

- error_messages: Словарь, который позволяет кастомизировать сообщения об ошибках для данного поля. Это полезно для создания более
информативных и понятных сообщений.
