DDAYNO5

Шаблоны: вывод HTML с данными
Цель
Научиться выводить данные из базы на страницу с помощью Django Templates
1. Подключение шаблонов в settings.py
По умолчанию Django уже настроен на работу с шаблонами, но важно убедиться, что в файле  settings.py подключена директория 
'DIRS': [BASE_DIR/'templates']

TEMPLATES = [
{
'BACKEND': 'django.template.backends.django.DjangoTemplates',
'DIRS': [BASE_DIR/'templates'],
'APP_DIRS':True,
...
},
]
Создайте папку templates в корне проекта и добавьте туда файлы шаблонов.

2. Создание базового шаблона base.html
Файл templates/base.html будет использоваться как скелет для всех страниц. В нём подключим Bootstrap и определим общий дизайн:
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Заметки</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">

    <h1 class="mb-4">Мои заметки</h1>

    {% block content %}
    {% endblock %}

</body>
</html>

3. Создание шаблона index.html (список заметок)
Создайте фалй templates/notes/index.html
{% extends 'base.html' %}

{% block content %}
    {% if notes %}
        <ul class="list-group">
            {% for note in notes %}
                <li class="list-group-item">
                    <a href="{% url 'note_detail' note.id %}">{{ note.title }}</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Заметок пока нет.</p>
    {% endif %}
{% endblock %}

{% for %} - цикл по всем заметкам
{% if %} - условие: если заметки есть
{{ note.title }} - вывод значения

4. Шаблон detail.html (страница одной заметки)
{% extends 'base.html' %}

{% block content %}
    <div class="card">
        <div class="card-body">
            <h3 class="card-title">{{ note.title }}</h3>
            <p class="card-text">{{ note.body }}</p>
            <small class="text-muted">Создано: {{ note.created_at|date:"d.m.Y H:i" }}</small>
        </div>
    </div>
    <br>
    <a href="{% url 'notes_list' %}">← Назад к списку</a>
{% endblock %}

{{note.created_at | date: "d.m.Y H:i"}} - фильтр форматирования даты

5. Обновим views.py для использования шаблонов
from django.shortcuts import render, get_object_or_404
from .models import Note

def notes_list(request):
    notes = Note.objects.all()
    return render(request, 'notes/index.html', {'notes': notes})

def note_detail(request, note_id):
    note = get_object_or_404(Note, pk=note_id)
    return render(request, 'notes/detail.html', {'note': note})

render() - возвращаем HTML-шаблон с данными
Третий аргумент - словарь с переменными для шаблона

6. Запуск проекта
Теперь запустите проект с помощью команды:
python manage.py runserver
После чего попробуйте перейти по адресу http://127.0.0.1:8000/notes/, и вы должны увидеть список своих заметок! И при нажатии на них должна открываться подробная тсраница про заметку,
на которую вы нажали!

7. Итоги: как работает Django-шаблонизатор (DTL)
HTML файлы хранятся в папке templates
{% block content %} and {% extends %} позволяют создавать шаблонную структуру
Через {{}} можно вставлять переменные (напрмер, {{note.title}})
{% for %}, {% if %} - позволяют выводить списки и управлять логикой
Bootstrap помогает быстро оформить страницу без написания CSS

Мы научились выводить данные из базы в виде красивой HTML-страницы.

Код - это юмор. Если нужно объяснять, значит он плохой.
