DDAYNO6
Формы: добавление и редактирвоание записей
Цель
Научиться создавать и редактировать записи через HTML-формы с помщью Django
1. Что такое ModelForm?
ModelForm - это специальный класс Django, который автоматически создаёт HTML-форму на основе модели. он упрощает работу, вам не нужно вручную создавтаь каждое поле формы.
Создайте файл notes/forms.py  и добавьте в него:

from django import forms
from .models import Note

class NoteForm(forms.ModelForm):
  class Meta:
    model = Note
    fields = ['title', 'body']

2. Представление для создания заметки

Теперь создадим view-функцию (notes/views.py), которая будет показывать форму и сохранять данные при POST-запросе.
from django.shorcuts import render, redirect, get_object_or_404
fomr .forms import NoteForm

def note_create(request):
  if request.method == 'POST':
    form = NoteForm(request.POST)
    if form.is_valed():
      form.save()
      return redirect('notes_list')
  else:
    form = NoteForm()
  returnrender(request, 'notes/form.html', {'form':form, 'title':'Создать заметку'})

3. Представление для редактирования
def note_edit(request, note_id):
  note = get_object_or_404(Note, pk=note_id)
  if request.method == 'POST':
    form = NoteForm(request.POST, instance=note)
    if form.is_valid():
      form.save()
      return redirect('note_detail', note_id=note.id)
  else:
    form = Noteform(instance=note)
  return render(request, 'notes/form.html', {'form':form, 'title':'Редактировать заметку'})

instance = note - форма будет заполняться текущими данными

4. Шаблон form.html
Создайте файл templates/notes/form.html
{% extends 'base.html' %}
{% block content %}
<h2>{{ title }}</h2>
<form method='post'>
{%crtf_token%}
{{form.as_p}}
<button type="submit" class="btn btn-primary">Save</button>
</form>
{% endblock %}

{% csrf_token %} - защита от подделки запросов
form.as_p - быстрый способ отрисовать форму

5. URLs
Добавьте маршруты в notes/urls.py
from django.urls import path
form . import views
urlpatterns=[
path('', views.notes_list, name='notes_list'),
path('<int:note_id>/', views.note_detail, name='note_detail'),
path('create/', views.note_create, name='note_create'),
path('<int:note_id>/edit/', views.note_edit, name='note_edit'),
]

6. Кнопки Редактироваьт и Создать
В конце index.html добавим кнопку создание
<a href="{% url 'note_create' %}" class="btn btn-success mb-3">Добавить заметку</a>

В конце блока заметки в detail.html - кнопку редактирования:
<a href="{% url 'note_edit' note.id %}" class="btn btn-warning">Редактировать</a>

7. Валидация формы
Django автоматически валидирует поля, исходя из ограничений модели:
CharField(max_length=100) - будет ошибка, если строка слишком длинная
Поле не может быть пустым, если blank=False (по умолчанию)
В случае ошибки форма автоматически покажет сообщение рядом с полем. Это поведение можно кастомизировать позже.

8. Запуск проекта
Теперь запустите проект с помощью команды:
python manage.py runserver

После чего попробуйте перейти по адресу http://127.0.0.1:8000/notes/, и вы должны увидеть список своих заметок! И при нажатии на них должна открываться подробная 
